(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0cab4720"],{"0dec":function(e,t,a){},"2f33":function(e,t,a){"use strict";a("4aab")},"2fb5":function(e,t,a){},"30f5":function(e,t,a){},"40c5":function(e,t,a){"use strict";a("b5ca")},"47fa":function(e,t,a){},"4aab":function(e,t,a){},"621b":function(e,t,a){},"85f1":function(e,t,a){"use strict";a("47fa")},"97ad":function(e,t,a){"use strict";a("30f5")},acf8:function(e,t,a){},b09c:function(e,t,a){"use strict";a("2fb5")},b5ca:function(e,t,a){},bb78:function(e,t,a){"use strict";a.r(t);a("14d9");var c=a("7a23"),l=a("5502"),n=a("21f5"),s=a("5c74"),r=a("85f2"),i=a("48e1"),u=a("80c9"),o=a("6f14");const b=e=>(Object(c["z"])("data-v-4ada709e"),e=e(),Object(c["x"])(),e),d={id:"rest"},j=b(()=>Object(c["h"])("div",{class:"campfire"},null,-1)),O={key:0},v={key:1};var p=Object(c["k"])({__name:"RestComponent",setup(e){const t=Object(l["c"])(),a=Object(c["c"])(()=>t.getters.player),b=o["a"].makeLotteryBox(30),p=Object(c["B"])(null),m=Object(c["c"])(()=>t.getters.sounds),y=r["c"][s["b"].Rest],h=async()=>{await u["a"].playSound(m.value.click),p.value||(p.value=setInterval(()=>{o["a"].lottery(b)?(clearInterval(p.value),t.dispatch(n["a"].changeGameState,s["c"].BattleStart)):a.value.CurrentHealth<a.value.Character.Health&&t.dispatch(n["a"].heal,{who:"player",point:1})},1e4))},g=async()=>{await u["a"].playSound(m.value.click),t.dispatch(n["a"].changeGameState,s["c"].BattleStart)},f=async()=>{await u["a"].playSound(m.value.click),t.dispatch(n["a"].switchShop)};return(e,t)=>(Object(c["w"])(),Object(c["g"])("div",d,[j,Object(c["j"])(i["a"],{dialogs:Object(c["H"])(y)},null,8,["dialogs"]),Object(c["h"])("button",{type:"button",class:Object(c["q"])(["system-btn w-100 my-3",{"system-btn-disabled":p.value}]),onClick:t[0]||(t[0]=e=>h())},[p.value?Object(c["f"])("",!0):(Object(c["w"])(),Object(c["g"])("span",O,"冒著被發現的風險休息回血")),p.value?(Object(c["w"])(),Object(c["g"])("span",v,"回血中...")):Object(c["f"])("",!0)],2),Object(c["h"])("button",{type:"button",class:"system-btn w-100 mb-3",onClick:t[1]||(t[1]=e=>g())},"尋找下一個 GKBot"),Object(c["h"])("button",{type:"button",class:"system-btn w-100",onClick:t[2]||(t[2]=e=>f())},"去商店瞧瞧")]))}}),m=(a("fda8"),a("6b0d")),y=a.n(m);const h=y()(p,[["__scopeId","data-v-4ada709e"]]);var g=h,f=a("0914");const w={id:"controller"},k=["src"],C=["src"];var x=Object(c["k"])({__name:"ControllerComponent",setup(e){const t=Object(l["c"])(),s=Object(c["c"])(()=>t.getters.sounds),r=async()=>{await u["a"].playSound(s.value.click),t.dispatch(n["a"].switchRank)},i=async()=>{await u["a"].playSound(s.value.click),t.dispatch(n["a"].switchBackpack)};return(e,t)=>(Object(c["w"])(),Object(c["g"])("div",w,[Object(c["h"])("div",{type:"button",class:"system-btn",onClick:t[0]||(t[0]=e=>r())},[Object(c["h"])("img",{src:a("d144")},null,8,k)]),Object(c["h"])("div",{type:"button",class:"system-btn",onClick:t[1]||(t[1]=e=>i())},[Object(c["h"])("img",{src:a("14ef")},null,8,C)])]))}});a("2f33");const I=y()(x,[["__scopeId","data-v-eb3b7fb4"]]);var S=I;const L={key:0,class:"message py-1 px-3 bg-light rounded shadow-sm d-flex align-center"},T={key:0,class:"arrow arrow-up"},B={key:1,class:"arrow arrow-down"},_={class:"m-0"},A={key:1,class:"message py-1 px-3 bg-light rounded shadow-sm d-flex align-center"},D={key:0,class:"arrow arrow-up"},G={key:1,class:"arrow arrow-down"},H={class:"m-0"};var E=Object(c["k"])({__name:"MumbleComponent",props:{who:String,showTriangle:String},setup(e){const t=e,a=Object(c["c"])(()=>i.getters.playerMumble),n=Object(c["c"])(()=>i.getters.playerMumbling),s=Object(c["c"])(()=>i.getters.enemyMumble),r=Object(c["c"])(()=>i.getters.enemyMumbling),i=Object(l["c"])();return(l,i)=>(Object(c["w"])(),Object(c["g"])(c["a"],null,["player"===t.who&&n.value&&a.value.length>0?(Object(c["w"])(),Object(c["g"])("div",L,["up"===e.showTriangle?(Object(c["w"])(),Object(c["g"])("div",T)):Object(c["f"])("",!0),"down"===e.showTriangle?(Object(c["w"])(),Object(c["g"])("div",B)):Object(c["f"])("",!0),Object(c["h"])("p",_,Object(c["G"])(a.value),1)])):Object(c["f"])("",!0),"enemy"===t.who&&r.value&&s.value.length>0?(Object(c["w"])(),Object(c["g"])("div",A,["up"===e.showTriangle?(Object(c["w"])(),Object(c["g"])("div",D)):Object(c["f"])("",!0),"down"===e.showTriangle?(Object(c["w"])(),Object(c["g"])("div",G)):Object(c["f"])("",!0),Object(c["h"])("p",H,Object(c["G"])(s.value),1)])):Object(c["f"])("",!0)],64))}});a("cc76");const M=y()(E,[["__scopeId","data-v-c2e734f4"]]);var P=M;const R={key:0,class:"profile-sm"},N={class:"avatar"},U={class:"mumble"},z=["src"],J={class:"status"},W={class:"d-flex align-items-center"},V={class:"name h6 m-0 me-1"},X={class:"health"},Y={class:"health-text m-0"},$={key:0,class:"health-change m-0 flow-up"},K={class:"w-100 m-0 d-flex align-items-center"},q={class:"status-text"},F={key:0,class:"status-text"},Z={class:"status-text"},Q={key:1,class:"status-text"},ee={key:2,class:"coin m-0 d-flex justify-content-between align-items-center"},te={class:"status-text m-1"},ae={key:0,class:"coin-change m-0 flow-up"},ce={key:1,class:"profile-main"},le={class:"profile-main-inner"},ne={class:"avatar"},se={class:"mumble"},re=["src"],ie={class:"status"},ue={class:"d-flex align-items-center"},oe={class:"name h6 m-0 me-1"},be={class:"health"},de={class:"health-text m-0"},je={key:0,class:"health-change m-0 flow-up"},Oe={class:"w-100 m-0 d-flex align-items-center"},ve={class:"status-text"},pe={key:0,class:"status-text"},me={class:"status-text"},ye={key:1,class:"status-text"},he={key:2,class:"coin m-0 d-flex justify-content-between align-items-center"},ge={class:"status-text"},fe={key:0,class:"coin-change m-0 flow-up"};var we=Object(c["k"])({__name:"PlayerStatusComponent",props:{player:{},isMain:{type:Boolean,default:!1}},setup(e){const t=e,n=Object(l["c"])(),r=Object(c["c"])(()=>n.getters.gameState),i=Object(c["c"])(()=>t.player.CurrentHealth/t.player.Character.Health*100),u=Object(c["B"])(0),o=Object(c["B"])(0),b=Object(c["B"])(0),d=Object(c["B"])(0);return Object(c["J"])(t.player,()=>{t.player.CurrentHealth!==o.value&&(u.value=t.player.CurrentHealth-o.value,setTimeout(()=>{o.value=t.player.CurrentHealth,u.value=0},1e3)),t.player.Coin!==d.value&&(b.value=t.player.Coin-d.value,setTimeout(()=>{d.value=t.player.Coin,b.value=0},1e3))}),Object(c["u"])(()=>{o.value=t.player.CurrentHealth,d.value=t.player.Coin}),(e,t)=>(Object(c["w"])(),Object(c["g"])(c["a"],null,[e.isMain?Object(c["f"])("",!0):(Object(c["w"])(),Object(c["g"])("div",R,[Object(c["h"])("div",N,[Object(c["h"])("div",U,[Object(c["j"])(P,{who:"enemy","show-triangle":"down"})]),Object(c["h"])("img",{src:a("e3dbd")("./"+e.player.Character.Avatar)},null,8,z)]),Object(c["h"])("div",J,[Object(c["h"])("div",W,[Object(c["h"])("p",V,Object(c["G"])(e.player.Character.Name),1),Object(c["h"])("div",X,[Object(c["h"])("div",{class:"health-inner",style:Object(c["r"])({width:i.value+"%"})},null,4),Object(c["h"])("p",Y,Object(c["G"])(e.player.CurrentHealth)+" / "+Object(c["G"])(e.player.Character.Health),1),0!==u.value?(Object(c["w"])(),Object(c["g"])("p",$,Object(c["G"])(u.value),1)):Object(c["f"])("",!0)])]),Object(c["h"])("p",K,[Object(c["j"])(f["a"],{icon:"images/itemtype1"}),Object(c["h"])("span",q,Object(c["G"])(e.player.CurrentAttack),1),e.player.ExtraAttack>0?(Object(c["w"])(),Object(c["g"])("span",F,"（+ "+Object(c["G"])(e.player.ExtraAttack)+"）",1)):Object(c["f"])("",!0),Object(c["j"])(f["a"],{icon:"images/itemtype2"}),Object(c["h"])("span",Z,Object(c["G"])(e.player.CurrentDefense),1),e.player.ExtraDefense>0?(Object(c["w"])(),Object(c["g"])("span",Q,"（+ "+Object(c["G"])(e.player.ExtraDefense)+"）",1)):Object(c["f"])("",!0),"P"===e.player.Character.Type?(Object(c["w"])(),Object(c["g"])("div",ee,[Object(c["j"])(f["a"],{icon:"images/screw"}),Object(c["h"])("span",te,Object(c["G"])(e.player.Coin),1),0!==b.value?(Object(c["w"])(),Object(c["g"])("p",ae,"+"+Object(c["G"])(b.value),1)):Object(c["f"])("",!0)])):Object(c["f"])("",!0)])])])),e.isMain?(Object(c["w"])(),Object(c["g"])("div",ce,[Object(c["h"])("div",le,[Object(c["h"])("div",ne,[Object(c["h"])("div",se,[Object(c["j"])(P,{who:"player","show-triangle":"down"})]),Object(c["h"])("img",{src:a("e3dbd")("./"+e.player.Character.Avatar)},null,8,re)]),Object(c["h"])("div",ie,[Object(c["h"])("div",ue,[Object(c["h"])("p",oe,Object(c["G"])(e.player.Character.Name),1),Object(c["h"])("div",be,[Object(c["h"])("div",{class:"health-inner",style:Object(c["r"])({width:i.value+"%"})},null,4),Object(c["h"])("p",de,Object(c["G"])(e.player.CurrentHealth)+" / "+Object(c["G"])(e.player.Character.Health),1),0!==u.value?(Object(c["w"])(),Object(c["g"])("p",je,Object(c["G"])(u.value),1)):Object(c["f"])("",!0)])]),Object(c["h"])("p",Oe,[Object(c["j"])(f["a"],{icon:"images/itemtype1"}),Object(c["h"])("span",ve,Object(c["G"])(e.player.CurrentAttack),1),e.player.ExtraAttack?(Object(c["w"])(),Object(c["g"])("span",pe,"（+ "+Object(c["G"])(e.player.ExtraAttack)+"）",1)):Object(c["f"])("",!0),Object(c["j"])(f["a"],{icon:"images/itemtype2"}),Object(c["h"])("span",me,Object(c["G"])(e.player.CurrentDefense),1),e.player.ExtraDefense?(Object(c["w"])(),Object(c["g"])("span",ye,"（+ "+Object(c["G"])(e.player.ExtraDefense)+"）",1)):Object(c["f"])("",!0),"P"===e.player.Character.Type?(Object(c["w"])(),Object(c["g"])("div",he,[Object(c["j"])(f["a"],{icon:"images/screw"}),Object(c["h"])("span",ge,Object(c["G"])(e.player.Coin),1),0!==b.value?(Object(c["w"])(),Object(c["g"])("p",fe,"+"+Object(c["G"])(b.value),1)):Object(c["f"])("",!0)])):Object(c["f"])("",!0)]),r.value===Object(c["H"])(s["c"]).Rest?(Object(c["w"])(),Object(c["e"])(S,{key:0})):Object(c["f"])("",!0)])])])):Object(c["f"])("",!0)],64))}});a("97ad");const ke=y()(we,[["__scopeId","data-v-53294917"]]);var Ce=ke;const xe={key:0},Ie={class:"enemy d-flex justify-content-center align-items-center flex-wrap"},Se={class:"w-100 h5 text-center m-0 my-3"};var Le=Object(c["k"])({__name:"BattleStartComponent",setup(e){const t=r["c"][s["b"].BattleStart],a=Object(l["c"])(),u=Object(c["c"])(()=>a.getters.enemy),o=Object(c["B"])(3);return Object(c["u"])(()=>{u.value.Character?a.dispatch(n["a"].generateEnemy):a.dispatch(n["a"].generateEnemy,1);const e=setInterval(()=>{o.value>0?o.value-=1:(clearInterval(e),setTimeout(()=>a.dispatch(n["a"].changeGameState,s["c"].Battle),500))},1e3)}),(e,a)=>u.value.Character?(Object(c["w"])(),Object(c["g"])("div",xe,[Object(c["j"])(i["a"],{dialogs:Object(c["H"])(t)},null,8,["dialogs"]),Object(c["h"])("div",Ie,[Object(c["j"])(Ce,{player:u.value},null,8,["player"]),Object(c["h"])("p",Se,Object(c["G"])(o.value)+" 秒後進入戰鬥",1)])])):Object(c["f"])("",!0)}});a("b09c");const Te=y()(Le,[["__scopeId","data-v-692933f9"]]);var Be=Te,_e=a("6df7");const Ae=e=>(Object(c["z"])("data-v-90e85b30"),e=e(),Object(c["x"])(),e),De={id:"battle",class:"d-flex flex-column justify-content-end align-items-center"},Ge={class:"enemy"},He={class:"items-container mb-3"},Ee={class:"card-table"},Me={class:"used-card-list rounded"},Pe={class:"system-text"},Re=Ae(()=>Object(c["h"])("span",{class:"me-1"},null,-1)),Ne={class:"player"},Ue={class:"items-container"},ze=["onClick"],Je=10;var We=Object(c["k"])({__name:"BattleComponent",setup(e){const t=Object(l["c"])(),a=(Object(c["c"])(()=>t.getters.gameState),Object(c["c"])(()=>t.getters.player)),r=Object(c["c"])(()=>t.getters.enemy),i=Object(c["c"])(()=>t.getters.sounds),b=Object(c["B"])(!1),d=Object(c["B"])(0),j=Object(c["B"])(s["g"].Start),O=Object(c["A"])({enemyItems:[null,null],playerItems:[null,null],result:s["a"].Init,usedCardList:[]}),v=o["a"].makeLotteryBox(50),p=o["a"].makeLotteryBox(30);Object(c["u"])(()=>{O.usedCardList=[],_(),h()});const m=e=>{const t=Math.floor(a.value.ItemList.length/2),c=5.5*(e-t),l=Math.abs(e-t)*Math.abs(e-t)*2;return`rotate(${c}deg) translateY(${l}px)`},y=Object(c["B"])(!1),h=()=>{O.enemyItems[0]&&O.usedCardList.push(O.enemyItems[0]),O.enemyItems[1]&&O.usedCardList.push(O.enemyItems[1]),O.playerItems[0]&&O.usedCardList.push(O.playerItems[0]),O.playerItems[1]&&O.usedCardList.push(O.playerItems[1]),O.enemyItems=[null,null],O.playerItems=[null,null],y.value=!1,b.value=!1,j.value=s["g"].Start,O.result=s["a"].Init;const e=r.value.ItemList.filter(e=>e.ItemType===s["d"].LogiCard),t=a.value.ItemList.filter(e=>e.ItemType===s["d"].LogiCard);0===e.length&&g("enemy"),0===t.length&&g("player"),clearInterval(w.value),f()},g=async e=>{let t,c=0;switch(e){case"enemy":for(let e=0;e<3;e++)setTimeout(async()=>{await u["a"].playSound(i.value.placeCard),c=o["a"].getRandomInt(0,O.usedCardList.length-1),t=O.usedCardList[c],r.value.ItemList.push(t),O.usedCardList.splice(c,1)},300*e);break;case"player":for(let e=0;e<3;e++)setTimeout(async()=>{await u["a"].playSound(i.value.placeCard),c=o["a"].getRandomInt(0,O.usedCardList.length-1),t=O.usedCardList[c],a.value.ItemList.push(t),O.usedCardList.splice(c,1),a.value.ItemList.sort((e,t)=>e.ID-t.ID)},300*e);break}},f=async()=>{d.value=-1,setTimeout(async()=>{d.value=o["a"].getZeroOrOne(),await u["a"].playSound(i.value.bell)},3e3)},w=Object(c["B"])(null),k=Object(c["B"])(Je);Object(c["J"])(d,async()=>{-1!==d.value&&(I(),k.value=Je,j.value=s["g"].Counting,w.value=setInterval(async()=>{k.value>0?(k.value-=1,3===k.value&&await u["a"].playSound(i.value.countdown)):(b.value=!0,j.value=s["g"].Duel,setTimeout(()=>B(),2e3),clearInterval(w.value))},1e3),setTimeout(()=>S(),1e3*o["a"].getRandomInt(3,Je/2)))});const C=Object(c["c"])(()=>t.getters.playerMumbling),x=Object(c["c"])(()=>t.getters.enemyMumbling),I=()=>{const e=setInterval(()=>{k.value>0?(C.value||t.dispatch(n["a"].playerMumble,{type:s["e"].General,delay:1e3*o["a"].getRandomInt(0,k.value/2)}),x.value||t.dispatch(n["a"].enemyMumble,{type:s["e"].General,delay:1e3*o["a"].getRandomInt(0,k.value/2)})):clearInterval(e)},5e3)},S=()=>{const e=r.value.ItemList.filter(e=>e.ItemType===s["d"].Health),t=r.value.ItemList.filter(e=>e.ItemType===s["d"].Attack),a=r.value.ItemList.filter(e=>e.ItemType===s["d"].Defense);if(e.length>0&&r.value.CurrentHealth<=.3*r.value.Character.Health){const t=r.value.ItemList.indexOf(e[0]);L(r.value.Character,e[0],t)}if(t.length>0&&o["a"].lottery(v)){const e=r.value.ItemList.indexOf(t[0]);L(r.value.Character,t[0],e)}if(a.length>0&&o["a"].lottery(v)){const e=r.value.ItemList.indexOf(a[0]);L(r.value.Character,a[0],e)}const c=r.value.ItemList.filter(e=>e.ItemType===s["d"].LogiCard).sort((e,t)=>e.Point-t.Point),l=Math.floor(c.length/2);let n=0;switch(d.value){case 0:n=o["a"].getRandomInt(0,l);break;case 1:n=o["a"].getRandomInt(l,c.length-1);break}L(r.value.Character,r.value.ItemList[n],n)},L=async(e,c,l)=>{let b=0;switch(c.ItemType){case s["d"].LogiCard:b=0;break;case s["d"].Attack:case s["d"].Defense:case s["d"].Health:b=1;break}switch(e.Type){case"P":const e=O.playerItems[b],d=j.value===s["g"].Counting||j.value===s["g"].Start;!e&&d&&(await u["a"].playSound(i.value.placeCard),a.value.ItemList.splice(l,1),O.playerItems[b]=c,t.dispatch(n["a"].playerMumble,{type:s["e"].PlaceCard,delay:0}),!x.value&&o["a"].lottery(v)&&t.dispatch(n["a"].enemyMumble,{type:s["e"].EnemyPlaceCard,delay:0})),a.value.ItemList.sort((e,t)=>e.ID-t.ID);break;case"B":r.value.ItemList.splice(l,1),O.enemyItems[b]=c,o["a"].lottery(v)&&t.dispatch(n["a"].enemyMumble,{type:s["e"].PlaceCard,delay:0});break}},T=async(e,t)=>{switch(e.Type){case"P":const e=O.playerItems[t],c=j.value===s["g"].Counting||j.value===s["g"].Start;c&&(await u["a"].playSound(i.value.placeCard),a.value.ItemList.push(e),O.playerItems[t]=null,a.value.ItemList.sort((e,t)=>e.ID-t.ID));break;case"B":const l=O.enemyItems[t];r.value.ItemList.push(l),O.enemyItems[t]=null;break}},B=async()=>{const e=O.enemyItems[0]?O.enemyItems[0].Point:null,c=O.enemyItems[1]?O.enemyItems[1]:null,l=O.playerItems[0]?O.playerItems[0].Point:null,b=O.playerItems[1]?O.playerItems[1]:null;let v=r.value.CurrentAttack,m=r.value.CurrentDefense,g=a.value.CurrentAttack,f=a.value.CurrentDefense;if(c)switch(c.ItemType){case s["d"].Attack:v+=c.Point,r.value.ExtraAttack=c.Point;break;case s["d"].Defense:m+=c.Point,r.value.ExtraDefense=c.Point;break;case s["d"].Health:t.dispatch(n["a"].heal,{who:"enemy",point:c.Point});break}if(b)switch(b.ItemType){case s["d"].Attack:g+=b.Point,a.value.ExtraAttack=b.Point;break;case s["d"].Defense:f+=b.Point,a.value.ExtraDefense=b.Point;break;case s["d"].Health:t.dispatch(n["a"].heal,{who:"player",point:b.Point});break}t.dispatch(n["a"].updatePlayer,{who:"player",player:a.value}),t.dispatch(n["a"].updatePlayer,{who:"enemy",player:r.value});const w=g-m>0?g-m:0,k=v-f>0?v-f:0;let C=s["a"].Draw;if(!e&&l)C=s["a"].PlayerWin;else if(e&&!l)C=s["a"].PlayerLose;else if(e&&l)switch(d.value){case 0:e<l?C=s["a"].PlayerLose:e>l&&(C=s["a"].PlayerWin);break;case 1:e>l?C=s["a"].PlayerLose:e<l&&(C=s["a"].PlayerWin);break}O.result=C,j.value=s["g"].Settle,C===s["a"].PlayerWin?(a.value.Record.TotalDamage+=w,o["a"].lottery(p)&&(a.value.Coin+=1),t.dispatch(n["a"].updatePlayer,{who:"player",player:a.value}),setTimeout(async()=>{await u["a"].playSound(i.value.robotHurt),t.dispatch(n["a"].deduction,{who:"enemy",point:w})},1e3),0===r.value.CurrentHealth?t.dispatch(n["a"].enemyMumble,{type:s["e"].Lose,delay:0}):t.dispatch(n["a"].enemyMumble,{type:s["e"].Hurt,delay:0})):C===s["a"].PlayerLose?(setTimeout(async()=>{await u["a"].playSound(i.value.ouch),t.dispatch(n["a"].deduction,{who:"player",point:k})},1e3),t.dispatch(n["a"].enemyMumble,{type:s["e"].Attack,delay:0})):await u["a"].playSound(i.value.huh),j.value=s["g"].SettleEnd,setTimeout(()=>y.value=!0,2500),setTimeout(()=>{0===r.value.CurrentHealth?(a.value.Record.DefeatBots+=1,t.dispatch(n["a"].updatePlayer,{who:"player",player:a.value}),t.dispatch(n["a"].changeGameState,s["c"].BattleEnd)):0===a.value.CurrentHealth?(a.value.Record.SurvivalTime=o["a"].diffDay((new Date).getTime(),a.value.CreatedTime),t.dispatch(n["a"].updatePlayer,{who:"player",player:a.value}),t.dispatch(n["a"].changeGameState,s["c"].GameEnd)):(_(),h())},3e3)},_=()=>{a.value.ExtraAttack=0,a.value.ExtraDefense=0,r.value.ExtraAttack=0,r.value.ExtraDefense=0,t.dispatch(n["a"].updatePlayer,{who:"player",player:a.value}),t.dispatch(n["a"].updatePlayer,{who:"enemy",player:r.value})};return(e,t)=>(Object(c["w"])(),Object(c["g"])("div",De,[Object(c["h"])("div",Ge,[Object(c["h"])("div",He,[(Object(c["w"])(!0),Object(c["g"])(c["a"],null,Object(c["C"])(r.value.ItemList,(e,t)=>(Object(c["w"])(),Object(c["e"])(_e["a"],{sm:!0,"is-card-back":!0,item:e},null,8,["item"]))),256))]),Object(c["j"])(Ce,{player:r.value},null,8,["player"])]),Object(c["h"])("div",Ee,[Object(c["h"])("div",Me,[(Object(c["w"])(!0),Object(c["g"])(c["a"],null,Object(c["C"])(O.usedCardList,e=>(Object(c["w"])(),Object(c["e"])(_e["a"],{sm:!0,item:e},null,8,["item"]))),256))]),Object(c["h"])("p",Pe,[-1===d.value?(Object(c["w"])(),Object(c["g"])(c["a"],{key:0},[Object(c["i"])("【抽籤中...】")],64)):Object(c["f"])("",!0),0===d.value?(Object(c["w"])(),Object(c["g"])(c["a"],{key:1},[Object(c["i"])("【比小】")],64)):Object(c["f"])("",!0),1===d.value?(Object(c["w"])(),Object(c["g"])(c["a"],{key:2},[Object(c["i"])("【比大】")],64)):Object(c["f"])("",!0),Re,j.value===Object(c["H"])(s["g"]).Start?(Object(c["w"])(),Object(c["g"])(c["a"],{key:3},[Object(c["i"])("回合開始")],64)):Object(c["f"])("",!0),j.value===Object(c["H"])(s["g"]).Counting?(Object(c["w"])(),Object(c["g"])(c["a"],{key:4},[Object(c["i"])(Object(c["G"])(k.value)+" 秒",1)],64)):Object(c["f"])("",!0),j.value===Object(c["H"])(s["g"]).Duel?(Object(c["w"])(),Object(c["g"])(c["a"],{key:5},[Object(c["i"])("決勝！")],64)):Object(c["f"])("",!0),j.value>=Object(c["H"])(s["g"]).Settle?(Object(c["w"])(),Object(c["g"])(c["a"],{key:6},[O.result===Object(c["H"])(s["a"]).PlayerWin?(Object(c["w"])(),Object(c["g"])(c["a"],{key:0},[Object(c["i"])("你贏了")],64)):Object(c["f"])("",!0),O.result===Object(c["H"])(s["a"]).PlayerLose?(Object(c["w"])(),Object(c["g"])(c["a"],{key:1},[Object(c["i"])("你輸了")],64)):Object(c["f"])("",!0),O.result===Object(c["H"])(s["a"]).Draw?(Object(c["w"])(),Object(c["g"])(c["a"],{key:2},[Object(c["i"])("平手")],64)):Object(c["f"])("",!0)],64)):Object(c["f"])("",!0)]),Object(c["h"])("div",{class:Object(c["q"])(["enemy-items",{"item-glow":O.result===Object(c["H"])(s["a"]).PlayerLose}])},[O.enemyItems[0]?(Object(c["w"])(),Object(c["e"])(_e["a"],{key:0,klass:y.value?"enemy-toss-card":"","is-card-back":!b.value,item:O.enemyItems[0]},null,8,["klass","is-card-back","item"])):Object(c["f"])("",!0),O.enemyItems[1]?(Object(c["w"])(),Object(c["e"])(_e["a"],{key:1,klass:y.value?"enemy-toss-card":"","is-card-back":!b.value,item:O.enemyItems[1]},null,8,["klass","is-card-back","item"])):Object(c["f"])("",!0)],2),Object(c["h"])("div",{class:Object(c["q"])(["player-items",{"item-glow":O.result===Object(c["H"])(s["a"]).PlayerWin}])},[O.playerItems[0]?(Object(c["w"])(),Object(c["g"])("div",{key:0,type:"button",onClick:t[0]||(t[0]=e=>T(a.value.Character,0))},[Object(c["j"])(_e["a"],{klass:y.value?"player-toss-card":"",item:O.playerItems[0]},null,8,["klass","item"])])):Object(c["f"])("",!0),O.playerItems[1]?(Object(c["w"])(),Object(c["g"])("div",{key:1,type:"button",onClick:t[1]||(t[1]=e=>T(a.value.Character,1))},[Object(c["j"])(_e["a"],{klass:y.value?"player-toss-card":"",item:O.playerItems[1]},null,8,["klass","item"])])):Object(c["f"])("",!0)],2)]),Object(c["h"])("div",Ne,[Object(c["h"])("div",Ue,[(Object(c["w"])(!0),Object(c["g"])(c["a"],null,Object(c["C"])(a.value.ItemList,(e,t)=>(Object(c["w"])(),Object(c["g"])("div",{type:"button",onClick:c=>L(a.value.Character,e,t)},[Object(c["j"])(_e["a"],{style:Object(c["r"])(m(t)),item:e},null,8,["style","item"])],8,ze))),256))])])]))}});a("40c5");const Ve=y()(We,[["__scopeId","data-v-90e85b30"]]);var Xe=Ve;const Ye=e=>(Object(c["z"])("data-v-32be486c"),e=e(),Object(c["x"])(),e),$e={class:"battle-end flex-grow-1 d-flex flex-column justify-content-center"},Ke=Ye(()=>Object(c["h"])("p",{class:"h6 w-100 m-0"},"機器人殘骸",-1)),qe={class:"items-container px-3 d-flex flex-wrap"},Fe=["onClick"],Ze=Ye(()=>Object(c["h"])("hr",{class:"hr m-0"},null,-1)),Qe={class:"h6 w-100 m-0"},et={class:"w-100 m-0"},tt={class:"items-container px-3 d-flex flex-wrap"},at=["onClick"];var ct=Object(c["k"])({__name:"BattleEndComponent",setup(e){const t=Object(l["c"])(),a=Object(c["c"])(()=>t.getters.player),b=Object(c["c"])(()=>t.getters.enemy),d=Object(c["c"])(()=>t.getters.shop),j=Object(c["B"])(0),O=Object(c["c"])(()=>t.getters.sounds),v=r["c"][s["b"].BattleEnd],p=o["a"].makeLotteryBox(50);Object(c["u"])(()=>{const e=[],c=r["d"].filter(e=>e.ItemType===s["d"].LogiCard),l=r["d"].filter(e=>e.ItemType!==s["d"].LogiCard);for(const t of c)e.push(t);const i=d.value.filter(e=>e.ItemType!==s["d"].LogiCard);for(const t of i)e.push(t);if(o["a"].lottery(p)){const t=o["a"].getRandomInt(0,l.length-1);e.push(l[t])}t.dispatch(n["a"].updateShop,e);const u=b.value.Character.RewardCoin[0],O=b.value.Character.RewardCoin[1];j.value=o["a"].getRandomInt(u,O),a.value.Coin+=j.value});const m=(e,t,c)=>{switch(e){case"player":b.value.ItemList.push(t),a.value.ItemList.splice(c,1),b.value.ItemList.sort((e,t)=>e.ID-t.ID);break;case"enemy":a.value.ItemList.length<a.value.Character.ItemLimit?(a.value.ItemList.push(t),b.value.ItemList.splice(c,1),a.value.ItemList.sort((e,t)=>e.ID-t.ID)):alert("已達背包上限！");break}},y=async()=>{const e=confirm("離開後就無法取回機器人殘骸裡的卡牌了，確定嗎？");e&&(await u["a"].playSound(O.value.click),t.dispatch(n["a"].updatePlayer,a.value),t.dispatch(n["a"].changeGameState,s["c"].Rest))};return(e,t)=>(Object(c["w"])(),Object(c["g"])("div",$e,[Object(c["j"])(i["a"],{dialogs:Object(c["H"])(v)},null,8,["dialogs"]),Ke,Object(c["h"])("div",qe,[(Object(c["w"])(!0),Object(c["g"])(c["a"],null,Object(c["C"])(b.value.ItemList,(e,t)=>(Object(c["w"])(),Object(c["g"])("div",{type:"button",onClick:a=>m("enemy",e,t)},[Object(c["j"])(_e["a"],{item:e},null,8,["item"])],8,Fe))),256))]),Ze,Object(c["h"])("p",Qe,"你的背包（上限："+Object(c["G"])(a.value.ItemList.length+"／"+a.value.Character.ItemLimit)+"）",1),Object(c["h"])("p",et,"獲得螺絲釘："+Object(c["G"])(j.value)+" ／總螺絲釘："+Object(c["G"])(a.value.Coin),1),Object(c["h"])("div",tt,[(Object(c["w"])(!0),Object(c["g"])(c["a"],null,Object(c["C"])(a.value.ItemList,(e,t)=>(Object(c["w"])(),Object(c["g"])("div",{type:"button",onClick:a=>m("player",e,t)},[Object(c["j"])(_e["a"],{item:e},null,8,["item"])],8,at))),256))]),Object(c["h"])("button",{type:"button",class:"system-btn w-100 mb-3",onClick:t[0]||(t[0]=e=>y())},"休息")]))}});a("eac7");const lt=y()(ct,[["__scopeId","data-v-32be486c"]]);var nt=lt;
/**
 * Vue 3 Carousel 0.3.1
 * (c) 2023
 * @license MIT
 */const st={itemsToShow:1,itemsToScroll:1,modelValue:0,transition:300,autoplay:0,snapAlign:"center",wrapAround:!1,throttle:16,pauseAutoplayOnHover:!1,mouseDrag:!0,touchDrag:!0,dir:"ltr",breakpoints:void 0,i18n:{ariaNextSlide:"Navigate to next slide",ariaPreviousSlide:"Navigate to previous slide",ariaNavigateToSlide:"Navigate to slide {slideNumber}",ariaGallery:"Gallery",itemXofY:"Item {currentSlide} of {slidesCount}",iconArrowUp:"Arrow pointing upwards",iconArrowDown:"Arrow pointing downwards",iconArrowRight:"Arrow pointing to the right",iconArrowLeft:"Arrow pointing to the left"}},rt={itemsToShow:{default:st.itemsToShow,type:Number},itemsToScroll:{default:st.itemsToScroll,type:Number},wrapAround:{default:st.wrapAround,type:Boolean},throttle:{default:st.throttle,type:Number},snapAlign:{default:st.snapAlign,validator(e){return["start","end","center","center-even","center-odd"].includes(e)}},transition:{default:st.transition,type:Number},breakpoints:{default:st.breakpoints,type:Object},autoplay:{default:st.autoplay,type:Number},pauseAutoplayOnHover:{default:st.pauseAutoplayOnHover,type:Boolean},modelValue:{default:void 0,type:Number},mouseDrag:{default:st.mouseDrag,type:Boolean},touchDrag:{default:st.touchDrag,type:Boolean},dir:{default:st.dir,validator(e){return["rtl","ltr"].includes(e)}},i18n:{default:st.i18n,type:Object},settings:{default(){return{}},type:Object}};function it({config:e,slidesCount:t}){const{snapAlign:a,wrapAround:c,itemsToShow:l=1}=e;if(c)return Math.max(t-1,0);let n;switch(a){case"start":n=t-l;break;case"end":n=t-1;break;case"center":case"center-odd":n=t-Math.ceil((l-.5)/2);break;case"center-even":n=t-Math.ceil(l/2);break;default:n=0;break}return Math.max(n,0)}function ut({config:e,slidesCount:t}){const{wrapAround:a,snapAlign:c,itemsToShow:l=1}=e;let n=0;if(a||l>t)return n;switch(c){case"start":n=0;break;case"end":n=l-1;break;case"center":case"center-odd":n=Math.floor((l-1)/2);break;case"center-even":n=Math.floor((l-2)/2);break;default:n=0;break}return n}function ot({val:e,max:t,min:a}){return t<a?e:Math.min(Math.max(e,a),t)}function bt({config:e,currentSlide:t,slidesCount:a}){const{snapAlign:c,wrapAround:l,itemsToShow:n=1}=e;let s=t;switch(c){case"center":case"center-odd":s-=(n-1)/2;break;case"center-even":s-=(n-2)/2;break;case"end":s-=n-1;break}return l?s:ot({val:s,max:a-n,min:0})}function dt(e){return e?e.reduce((e,t)=>{var a;return t.type===c["a"]?[...e,...dt(t.children)]:"CarouselSlide"===(null===(a=t.type)||void 0===a?void 0:a.name)?[...e,t]:e},[]):[]}function jt({val:e,max:t,min:a=0}){return e>t?jt({val:e-(t+1),max:t,min:a}):e<a?jt({val:e+(t+1),max:t,min:a}):e}function Ot(e,t){let a;return t?function(...c){const l=this;a||(e.apply(l,c),a=!0,setTimeout(()=>a=!1,t))}:e}function vt(e,t){let a;return function(...c){a&&clearTimeout(a),a=setTimeout(()=>{e(...c),a=null},t)}}function pt(e="",t={}){return Object.entries(t).reduce((e,[t,a])=>e.replace(`{${t}}`,String(a)),e)}var mt,yt=Object(c["k"])({name:"ARIA",setup(){const e=Object(c["o"])("config",Object(c["A"])(Object.assign({},st))),t=Object(c["o"])("currentSlide",Object(c["B"])(0)),a=Object(c["o"])("slidesCount",Object(c["B"])(0));return()=>Object(c["n"])("div",{class:["carousel__liveregion","carousel__sr-only"],"aria-live":"polite","aria-atomic":"true"},pt(e.i18n["itemXofY"],{currentSlide:t.value+1,slidesCount:a.value}))}}),ht=Object(c["k"])({name:"Carousel",props:rt,setup(e,{slots:t,emit:a,expose:l}){var n;const s=Object(c["B"])(null),r=Object(c["B"])([]),i=Object(c["B"])(0),u=Object(c["B"])(0),o=Object(c["A"])(Object.assign({},st));let b,d=Object.assign({},st);const j=Object(c["B"])(null!==(n=e.modelValue)&&void 0!==n?n:0),O=Object(c["B"])(0),v=Object(c["B"])(0),p=Object(c["B"])(0),m=Object(c["B"])(0);let y,h;function g(){b=Object.assign({},e.breakpoints),d=Object.assign(Object.assign(Object.assign({},d),e),{i18n:Object.assign(Object.assign({},d.i18n),e.i18n),breakpoints:void 0}),w(d)}function f(){if(!b||!Object.keys(b).length)return;const e=Object.keys(b).map(e=>Number(e)).sort((e,t)=>+t-+e);let t=Object.assign({},d);e.some(e=>{const a=window.matchMedia(`(min-width: ${e}px)`).matches;return a&&(t=Object.assign(Object.assign({},t),b[e])),a}),w(t)}function w(e){Object.entries(e).forEach(([e,t])=>o[e]=t)}Object(c["y"])("config",o),Object(c["y"])("slidesCount",u),Object(c["y"])("currentSlide",j),Object(c["y"])("maxSlide",p),Object(c["y"])("minSlide",m),Object(c["y"])("slideWidth",i);const k=vt(()=>{f(),C()},16);function C(){if(!s.value)return;const e=s.value.getBoundingClientRect();i.value=e.width/o.itemsToShow}function x(){u.value<=0||(v.value=Math.ceil((u.value-1)/2),p.value=it({config:o,slidesCount:u.value}),m.value=ut({config:o,slidesCount:u.value}),o.wrapAround||(j.value=ot({val:j.value,max:p.value,min:m.value})))}Object(c["u"])(()=>{Object(c["p"])(()=>C()),setTimeout(()=>C(),1e3),f(),M(),window.addEventListener("resize",k,{passive:!0}),a("init")}),Object(c["v"])(()=>{h&&clearTimeout(h),y&&clearInterval(y),window.removeEventListener("resize",k,{passive:!0})});let I=!1;const S={x:0,y:0},L={x:0,y:0},T=Object(c["A"])({x:0,y:0}),B=Object(c["B"])(!1),_=Object(c["B"])(!1),A=()=>{B.value=!0},D=()=>{B.value=!1};function G(e){["INPUT","TEXTAREA","SELECT"].includes(e.target.tagName)||(I="touchstart"===e.type,I||e.preventDefault(),!I&&0!==e.button||R.value||(S.x=I?e.touches[0].clientX:e.clientX,S.y=I?e.touches[0].clientY:e.clientY,document.addEventListener(I?"touchmove":"mousemove",H,!0),document.addEventListener(I?"touchend":"mouseup",E,!0)))}const H=Ot(e=>{_.value=!0,L.x=I?e.touches[0].clientX:e.clientX,L.y=I?e.touches[0].clientY:e.clientY;const t=L.x-S.x,a=L.y-S.y;T.y=a,T.x=t},o.throttle);function E(){const e="rtl"===o.dir?-1:1,t=.4*Math.sign(T.x),a=Math.round(T.x/i.value+t)*e;if(a&&!I){const e=t=>{t.stopPropagation(),window.removeEventListener("click",e,!0)};window.addEventListener("click",e,!0)}N(j.value-a),T.x=0,T.y=0,_.value=!1,document.removeEventListener(I?"touchmove":"mousemove",H,!0),document.removeEventListener(I?"touchend":"mouseup",E,!0)}function M(){!o.autoplay||o.autoplay<=0||(y=setInterval(()=>{o.pauseAutoplayOnHover&&B.value||U()},o.autoplay))}function P(){y&&(clearInterval(y),y=null),M()}const R=Object(c["B"])(!1);function N(e){const t=o.wrapAround?e:ot({val:e,max:p.value,min:m.value});j.value===t||R.value||(a("slide-start",{slidingToIndex:e,currentSlideIndex:j.value,prevSlideIndex:O.value,slidesCount:u.value}),R.value=!0,O.value=j.value,j.value=t,h=setTimeout(()=>{if(o.wrapAround){const c=jt({val:t,max:p.value,min:0});c!==j.value&&(j.value=c,a("loop",{currentSlideIndex:j.value,slidingToIndex:e}))}a("update:modelValue",j.value),a("slide-end",{currentSlideIndex:j.value,prevSlideIndex:O.value,slidesCount:u.value}),R.value=!1,P()},o.transition))}function U(){N(j.value+o.itemsToScroll)}function z(){N(j.value-o.itemsToScroll)}const J={slideTo:N,next:U,prev:z};Object(c["y"])("nav",J),Object(c["y"])("isSliding",R);const W=Object(c["c"])(()=>bt({config:o,currentSlide:j.value,slidesCount:u.value}));Object(c["y"])("slidesToScroll",W);const V=Object(c["c"])(()=>{const e="rtl"===o.dir?-1:1,t=W.value*i.value*e;return{transform:`translateX(${T.x-t}px)`,transition:(R.value?o.transition:0)+"ms",margin:o.wrapAround?`0 -${u.value*i.value}px`:"",width:"100%"}});function X(){g(),f(),x(),C(),P()}Object.keys(rt).forEach(t=>{["modelValue"].includes(t)||Object(c["J"])(()=>e[t],X)}),Object(c["J"])(()=>e["modelValue"],e=>{e!==j.value&&N(Number(e))}),Object(c["J"])(u,x),a("before-init"),g();const Y={config:o,slidesCount:u,slideWidth:i,next:U,prev:z,slideTo:N,currentSlide:j,maxSlide:p,minSlide:m,middleSlide:v};l({updateBreakpointsConfigs:f,updateSlidesData:x,updateSlideWidth:C,initDefaultConfigs:g,restartCarousel:X,slideTo:N,next:U,prev:z,nav:J,data:Y});const $=t.default||t.slides,K=t.addons,q=Object(c["A"])(Y);return()=>{const e=dt(null===$||void 0===$?void 0:$(q)),t=(null===K||void 0===K?void 0:K(q))||[];e.forEach((e,t)=>e.props.index=t);let a=e;if(o.wrapAround){const t=e.map((t,a)=>Object(c["b"])(t,{index:-e.length+a,isClone:!0,key:"clone-before-"+a})),l=e.map((t,a)=>Object(c["b"])(t,{index:e.length+a,isClone:!0,key:"clone-after-"+a}));a=[...t,...e,...l]}r.value=e,u.value=Math.max(e.length,1);const l=Object(c["n"])("ol",{class:"carousel__track",style:V.value,onMousedownCapture:o.mouseDrag?G:null,onTouchstartPassiveCapture:o.touchDrag?G:null},a),n=Object(c["n"])("div",{class:"carousel__viewport"},l);return Object(c["n"])("section",{ref:s,class:{carousel:!0,"is-sliding":R.value,"is-dragging":_.value,"is-hover":B.value,"carousel--rtl":"rtl"===o.dir},dir:o.dir,"aria-label":o.i18n["ariaGallery"],tabindex:"0",onMouseenter:A,onMouseleave:D},[n,t,Object(c["n"])(yt)])}}});(function(e){e["arrowUp"]="arrowUp",e["arrowDown"]="arrowDown",e["arrowRight"]="arrowRight",e["arrowLeft"]="arrowLeft"})(mt||(mt={}));const gt={arrowUp:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z",arrowDown:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z",arrowRight:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z",arrowLeft:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"};function ft(e){return e in mt}const wt=e=>{const t=Object(c["o"])("config",Object(c["A"])(Object.assign({},st))),a=String(e.name),l="icon"+(a.charAt(0).toUpperCase()+a.slice(1));if(!a||"string"!==typeof a||!ft(a))return;const n=gt[a],s=Object(c["n"])("path",{d:n}),r=t.i18n[l]||e.title||a,i=Object(c["n"])("title",r);return Object(c["n"])("svg",{class:"carousel__icon",viewBox:"0 0 24 24",role:"img","aria-label":r},[i,s])};wt.props={name:String,title:String};const kt=(e,{slots:t,attrs:a})=>{const{next:l,prev:n}=t||{},s=Object(c["o"])("config",Object(c["A"])(Object.assign({},st))),r=Object(c["o"])("maxSlide",Object(c["B"])(1)),i=Object(c["o"])("minSlide",Object(c["B"])(1)),u=Object(c["o"])("currentSlide",Object(c["B"])(1)),o=Object(c["o"])("nav",{}),{dir:b,wrapAround:d,i18n:j}=s,O="rtl"===b,v=Object(c["n"])("button",{type:"button",class:["carousel__prev",!d&&u.value<=i.value&&"carousel__prev--disabled",null===a||void 0===a?void 0:a.class],"aria-label":j["ariaPreviousSlide"],onClick:o.prev},(null===n||void 0===n?void 0:n())||Object(c["n"])(wt,{name:O?"arrowRight":"arrowLeft"})),p=Object(c["n"])("button",{type:"button",class:["carousel__next",!d&&u.value>=r.value&&"carousel__next--disabled",null===a||void 0===a?void 0:a.class],"aria-label":j["ariaNextSlide"],onClick:o.next},(null===l||void 0===l?void 0:l())||Object(c["n"])(wt,{name:O?"arrowLeft":"arrowRight"}));return[v,p]};var Ct=Object(c["k"])({name:"CarouselSlide",props:{index:{type:Number,default:1},isClone:{type:Boolean,default:!1}},setup(e,{slots:t}){const a=Object(c["o"])("config",Object(c["A"])(Object.assign({},st))),l=Object(c["o"])("currentSlide",Object(c["B"])(0)),n=Object(c["o"])("slidesToScroll",Object(c["B"])(0)),s=Object(c["o"])("isSliding",Object(c["B"])(!1)),r=()=>e.index===l.value,i=()=>e.index===l.value-1,u=()=>e.index===l.value+1,o=()=>{const t=Math.floor(n.value),c=Math.ceil(n.value+a.itemsToShow-1);return e.index>=t&&e.index<=c};return()=>{var l;return Object(c["n"])("li",{style:{width:100/a.itemsToShow+"%"},class:{carousel__slide:!0,"carousel__slide--clone":e.isClone,"carousel__slide--visible":o(),"carousel__slide--active":r(),"carousel__slide--prev":i(),"carousel__slide--next":u(),"carousel__slide--sliding":s.value},"aria-hidden":!o()},null===(l=t.default)||void 0===l?void 0:l.call(t))}}});const xt=e=>(Object(c["z"])("data-v-0b122638"),e=e(),Object(c["x"])(),e),It={id:"game"},St={class:"social mb-3"},Lt=["src"],Tt=["src"],Bt=["src"],_t={class:"choose-character mb-3"},At=xt(()=>Object(c["h"])("p",{class:"m-0 mb-1"},"初始道具：",-1)),Dt={class:"items-container px-3 d-flex"},Gt={class:"table flex-grow-1"},Ht=xt(()=>Object(c["h"])("td",null,"使用角色",-1)),Et={class:"text"},Mt=xt(()=>Object(c["h"])("td",null,"總攻擊量",-1)),Pt={class:"text"},Rt=xt(()=>Object(c["h"])("td",null,"總治療量",-1)),Nt={class:"text"},Ut=xt(()=>Object(c["h"])("td",null,"擊殺 GKBot 數量",-1)),zt={class:"text"},Jt=xt(()=>Object(c["h"])("td",null,"存活時間",-1)),Wt={class:"text"};var Vt=Object(c["k"])({__name:"GameView",setup(e){const t=Object(l["c"])(),b=Object(c["c"])(()=>t.getters.gameState),d=Object(c["c"])(()=>t.getters.player),j=Object(c["c"])(()=>t.getters.sounds),O={opening:r["c"][s["b"].Opening],gameStart:r["c"][s["b"].GameStart],gameEnd:r["c"][s["b"].GameEnd]},v=async()=>{await u["a"].playSound(j.value.click),window.open("https://github.com/gkfat/logicard-duel/","_blank")},p=async()=>{await u["a"].playSound(j.value.click),window.open("mailto:gkgkdesign@gmail.com","_blank")},m=async()=>{await u["a"].playSound(j.value.click),t.dispatch(n["a"].switchRank)},y=async()=>{await u["a"].playSound(j.value.click),await t.dispatch(n["a"].switchSpinner,!0),await t.dispatch(n["a"].changeGameState,s["c"].ChooseCharacter),setTimeout(()=>t.dispatch(n["a"].switchSpinner,!1),300)},h=Object(c["B"])("");Object(c["J"])(h,()=>{h.value=h.value.trim(),h.value.length>20&&(h.value=h.value.substring(0,20))});const f=Object(c["c"])(()=>t.getters.endUpdating),w=async()=>{await t.dispatch(n["a"].switchSpinner,!0),await t.dispatch(n["a"].updateData,{sheetName:s["h"].Records,operation:s["f"].Update,data:{EndTime:o["a"].getCurrentDate(),Character:d.value.Character.Name,TotalDamage:d.value.Record.TotalDamage,TotalHeal:d.value.Record.TotalHeal,DefeatBots:d.value.Record.DefeatBots,SurvivalTime:d.value.Record.SurvivalTime+" 小時",LastWords:h.value}})};Object(c["J"])(f,()=>{f.value&&(t.dispatch(n["a"].switchSpinner,!1),setTimeout(()=>window.location.reload(),1e3))}),Object(c["J"])(b,async()=>{switch(b.value){case s["c"].ChooseCharacter:await u["a"].playBGM(j.value.prologue);break;case s["c"].BattleStart:u["a"].stop(j.value.rest),u["a"].stop(j.value.prologue),await u["a"].playBGM(j.value.battle);break;case s["c"].Rest:u["a"].stop(j.value.battle),await u["a"].playBGM(j.value.rest);break;case s["c"].GameEnd:u["a"].stop(j.value.battle),await u["a"].playBGM(j.value.end);break}});const k=O.gameStart.length-1,C=Object(c["c"])(()=>x.value===k),x=Object(c["B"])(0),I=async()=>{x.value<k&&(await u["a"].playSound(j.value.click),x.value+=1)},S=async()=>{await u["a"].playSound(j.value.click),x.value=k},L=r["a"].filter(e=>"P"===e.Type),T=L.map(e=>Object(c["A"])({Character:e,CurrentHealth:e.Health,CurrentAttack:e.Attack,CurrentDefense:e.Defense,ExtraAttack:0,ExtraDefense:0,Coin:e.Coin})),B=Object(c["B"])(0),_=e=>B.value=e.currentSlideIndex,A=async()=>{await u["a"].playSound(j.value.click);const e=L[B.value];for(const t of r["b"][e.ID])e.MumbleList[s["e"].General].push(t);await t.dispatch(n["a"].selectCharacter,e),await t.dispatch(n["a"].switchSpinner,!0),await t.dispatch(n["a"].changeGameState,s["c"].BattleStart),setTimeout(()=>t.dispatch(n["a"].switchSpinner,!1),300)};return(e,t)=>(Object(c["w"])(),Object(c["g"])("div",It,[b.value===Object(c["H"])(s["c"]).Init?(Object(c["w"])(),Object(c["g"])(c["a"],{key:0},[Object(c["j"])(i["a"],{dialogs:O.opening},null,8,["dialogs"]),Object(c["h"])("div",St,[Object(c["h"])("a",{type:"button",class:"system-btn social-item",onClick:t[0]||(t[0]=e=>v())},[Object(c["h"])("img",{class:"img-fluid",src:a("19cc")},null,8,Lt)]),Object(c["h"])("a",{type:"button",class:"system-btn social-item",onClick:t[1]||(t[1]=e=>p())},[Object(c["h"])("img",{class:"img-fluid",src:a("e9ce")},null,8,Tt)]),Object(c["h"])("div",{type:"button",class:"system-btn social-item",onClick:t[2]||(t[2]=e=>m())},[Object(c["h"])("img",{class:"img-fluid",src:a("d144")},null,8,Bt)])]),Object(c["h"])("button",{type:"button",class:"w-100 system-btn mb-3",onClick:t[3]||(t[3]=e=>y())},"開始冒險")],64)):Object(c["f"])("",!0),b.value===Object(c["H"])(s["c"]).ChooseCharacter?(Object(c["w"])(),Object(c["g"])(c["a"],{key:1},[Object(c["j"])(i["a"],{dialogs:O.gameStart[x.value]},null,8,["dialogs"]),C.value?Object(c["f"])("",!0):(Object(c["w"])(),Object(c["g"])(c["a"],{key:0},[Object(c["h"])("button",{type:"button",class:"w-100 system-btn system-btn-skip system-btn-light mb-3",onClick:t[4]||(t[4]=e=>S())},"跳過"),Object(c["h"])("button",{type:"button",class:"w-100 system-btn mb-3",onClick:t[5]||(t[5]=e=>I())},"繼續")],64)),C.value?(Object(c["w"])(),Object(c["g"])(c["a"],{key:1},[Object(c["h"])("div",_t,[Object(c["j"])(Object(c["H"])(ht),{"items-to-show":1,"wrap-around":!0,onSlideEnd:_},{addons:Object(c["K"])(()=>[Object(c["j"])(Object(c["H"])(kt))]),default:Object(c["K"])(()=>[(Object(c["w"])(!0),Object(c["g"])(c["a"],null,Object(c["C"])(Object(c["H"])(T),(e,t)=>(Object(c["w"])(),Object(c["e"])(Object(c["H"])(Ct),{key:t},{default:Object(c["K"])(()=>[Object(c["h"])("div",{type:"button",class:Object(c["q"])(["character rounded p-3",{"carousel__slide--active":B.value===t}])},[Object(c["j"])(Ce,{player:e},null,8,["player"]),At,Object(c["h"])("div",Dt,[(Object(c["w"])(!0),Object(c["g"])(c["a"],null,Object(c["C"])(e.Character.InitItemList,e=>(Object(c["w"])(),Object(c["e"])(_e["a"],{sm:!0,item:e},null,8,["item"]))),256))])],2)]),_:2},1024))),128))]),_:1})]),Object(c["h"])("button",{type:"button",class:"w-100 system-btn mb-3",onClick:t[6]||(t[6]=e=>A())},"決定")],64)):Object(c["f"])("",!0)],64)):Object(c["f"])("",!0),b.value>=Object(c["H"])(s["c"]).Rest&&b.value<Object(c["H"])(s["c"]).BattleEnd?(Object(c["w"])(),Object(c["g"])(c["a"],{key:2},[b.value===Object(c["H"])(s["c"]).Rest?(Object(c["w"])(),Object(c["e"])(g,{key:0})):Object(c["f"])("",!0),b.value===Object(c["H"])(s["c"]).BattleStart?(Object(c["w"])(),Object(c["e"])(Be,{key:1})):Object(c["f"])("",!0),b.value===Object(c["H"])(s["c"]).Battle?(Object(c["w"])(),Object(c["e"])(Xe,{key:2})):Object(c["f"])("",!0),Object(c["j"])(Ce,{"is-main":!0,player:d.value},null,8,["player"])],64)):Object(c["f"])("",!0),b.value===Object(c["H"])(s["c"]).BattleEnd?(Object(c["w"])(),Object(c["e"])(nt,{key:3})):Object(c["f"])("",!0),b.value===Object(c["H"])(s["c"]).GameEnd?(Object(c["w"])(),Object(c["g"])(c["a"],{key:4},[Object(c["j"])(i["a"],{dialogs:O.gameEnd},null,8,["dialogs"]),Object(c["h"])("table",Gt,[Object(c["h"])("tr",null,[Ht,Object(c["h"])("td",Et,Object(c["G"])(d.value.Character.Name),1)]),Object(c["h"])("tr",null,[Mt,Object(c["h"])("td",Pt,Object(c["G"])(d.value.Record.TotalDamage),1)]),Object(c["h"])("tr",null,[Rt,Object(c["h"])("td",Nt,Object(c["G"])(d.value.Record.TotalHeal),1)]),Object(c["h"])("tr",null,[Ut,Object(c["h"])("td",zt,Object(c["G"])(d.value.Record.DefeatBots),1)]),Object(c["h"])("tr",null,[Jt,Object(c["h"])("td",Wt,Object(c["G"])(d.value.Record.SurvivalTime)+" 小時",1)])]),Object(c["L"])(Object(c["h"])("input",{type:"text",class:"form-control mb-3",placeholder:"寫點什麼吧...(上限 20 字)","onUpdate:modelValue":t[7]||(t[7]=e=>h.value=e)},null,512),[[c["I"],h.value]]),Object(c["h"])("button",{type:"button",class:"w-100 system-btn mb-3",onClick:t[8]||(t[8]=e=>w())},"成佛")],64)):Object(c["f"])("",!0)]))}});a("85f1");const Xt=y()(Vt,[["__scopeId","data-v-0b122638"]]);t["default"]=Xt},cc76:function(e,t,a){"use strict";a("acf8")},e3dbd:function(e,t,a){var c={"./artist.png":"208f","./fat.png":"6866","./gkbot-attack.png":"9786","./gkbot-defense.png":"d436","./gkbot-perform.png":"d55f","./gkbot-worker.png":"a9f1","./man.png":"5d1e"};function l(e){var t=n(e);return a(t)}function n(e){if(!a.o(c,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return c[e]}l.keys=function(){return Object.keys(c)},l.resolve=n,e.exports=l,l.id="e3dbd"},eac7:function(e,t,a){"use strict";a("621b")},fda8:function(e,t,a){"use strict";a("0dec")}}]);
//# sourceMappingURL=chunk-0cab4720.9dd63a9a.js.map